<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AR Флаг</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body>
    <!-- Сцена Меню -->
    <div id="scene-menu" class="scene active">
        <div class="menu-content">
            <h1>AR Флаг</h1>
            <p class="description">Наведите камеру на маркер MarkerVacnecov</p>
            <button class="start-btn" onclick="switchToAR()">
                Запустить AR
            </button>
        </div>
    </div>

    <!-- Сцена AR -->
    <div id="scene-ar" class="scene">
        <button class="back-btn" onclick="switchToMenu()">
            ← Назад
        </button>
        
        <!-- Контейнер для AR сцены -->
        <div id="ar-container">
            <a-scene 
                vr-mode-ui="enabled: false"
                embedded
                arjs='sourceType: webcam; 
                      debugUIEnabled: false;
                      detectionMode: mono_and_matrix; 
                      matrixCodeType: 3x3;'
                renderer="antialias: true; alpha: true;"
                id="ar-scene">
                
                <!-- Маркер -->
                <a-marker 
                    id="marker"
                    type="pattern" 
                    url="assets/markers/MarkerVacnecov.patt"
                    raycaster="objects: .clickable"
                    cursor="fuse: false; rayOrigin: mouse;"
                    emitevents="true">
                    
                    <!-- Флаг -->
                    <a-image 
                        id="flag"
                        class="clickable"
                        src="assets/sprite/Flag.png"
                        position="0 0.5 0"
                        scale="0.25 0.25 0.25"
                        rotation="-90 0 0"
                        look-at="[camera]">
                    </a-image>
                </a-marker>
                
                <!-- Камера должна быть последней -->
                <a-entity camera></a-entity>
            </a-scene>
        </div>
        
        <div class="ar-hint" id="ar-hint">
            Наведите на маркер MarkerVacnecov
        </div>
        
        <div class="ar-loader" id="ar-loader">
            <div class="loader-content">
                <div class="loader-spinner"></div>
                <div class="loader-text" id="loader-text">Подготовка камеры...</div>
        </div>
</div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>