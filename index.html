<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AR Project</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <!-- AR.js (старая, но стабильная версия для pattern-маркеров) -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <!-- Дополнительные скрипты для gesture-detector (если нужно) -->
  <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
  <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>
</head>
<body>
  <!-- Сцена 1: Начальный экран -->
  <div id="scene1" class="scene">
    <div class="center-button">
      <button id="startArButton">Запустить AR</button>
    </div>
  </div>

  <!-- Сцена 2: AR сцена (скрыта изначально) -->
  <div id="scene2" class="scene" style="display:none;">
    <a-scene
      vr-mode-ui="enabled: false"
      loading-screen="enabled: false"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; maxDetectionRate: 30;"
      embedded
      gesture-detector
      id="arScene"
    >
      <!-- Камера -->
      <a-entity camera></a-entity>

      <!-- Маркер -->
      <a-marker
        id="vacnecovMarker"
        type="pattern"
        preset="custom"
        url="./assets/markers/MarkerVacnecov.patt"
        raycaster="objects: .clickable"
        emitevents="true"
        cursor="fuse: false; rayOrigin: mouse;"
        on-marker-found="onMarkerFound"
        on-marker-lost="onMarkerLost"
      >
        <!-- Спрайт флага (скрыт изначально) -->
        <a-image
          id="flagSprite"
          src="./assets/images/Flag.png"
          position="0 0 0"
          scale="0.5 0.5 0.5"
          visible="false"
          class="clickable"
          rotation="-90 0 0"
          gesture-handler
          onclick="window.ARApp.showPanel()"
        ></a-image>
      </a-marker>

      <!-- Панелька (скрыта изначально) -->
      <a-entity
        id="infoPanel"
        position="0 0 0"
        scale="0.7 0.7 0.7"
        visible="false"
        geometry="primitive: plane; width: 1.5; height: 1.2"
        material="color: #ffffff; opacity: 0.95; side: double"
        text="value: Информация о маркере\nНажмите чтобы закрыть; align: center; wrapCount: 20; color: #000; width: 1.3"
        onclick="window.ARApp.hidePanel()"
        class="clickable"
      ></a-entity>

    </a-scene>
  </div>

  <!-- Подключаем основной скрипт -->
  <script src="js/main.js"></script>
</body>
</html>